!function(h){const i="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDEwIDEwIj48cmVjdCB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9Im5vbmUiLz48L3N2Zz4=";let n,s="normal",g={};function c(){let a=!1,i=0,n=0,s=0,c=0,d=document.getElementById("canvas"),l=d.getContext("2d"),o=document.getElementById("img0"),r;o.onload=function(){r=o.naturalWidth/(.9*window.innerWidth);var e=Math.max(o.width,o.height),e=100*Math.min(o.width,o.height)/e;d.width=.9*window.innerWidth,d.height=.9*window.innerWidth*e/100,l.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,d.width,d.height)},d.addEventListener("touchstart",function(e){a=!0;var t=e.target.getBoundingClientRect();i=e.clientX-t.left,n=e.clientY-t.top,l.lineWidth=2,l.strokeStyle="#f08300",l.setLineDash([2,3])}),d.addEventListener("touchmove",function(e){a&&(e.target.getBoundingClientRect(),s=e.offsetX-i,c=e.offsetY-n,l.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,d.width,d.height),l.beginPath(),l.strokeRect(i,n,s,c))}),d.addEventListener("touchend",function(e){var t;i===s&&n===c&&(l.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,d.width,d.height),i=s=0,n=c=0),a&&(g.sx=i*r,g.sy=n*r,g.sw=s*r,g.sh=c*r,t="",t+="横幅："+g.sw,t+="　高さ："+g.sh,t+="　X座標："+g.sx,t+="　Y座標："+g.sy,h(".js-setting").text(t),localStorage.setItem("sx",g.sx),localStorage.setItem("sy",g.sy),localStorage.setItem("sw",g.sw),localStorage.setItem("sh",g.sh)),a=!1})}h(window).on("load",function(){!function(){let e="";localStorage.getItem("sw")&&(e+="横幅："+localStorage.sw),localStorage.getItem("sh")&&(e+="　高さ："+localStorage.sh),localStorage.getItem("sx")&&(e+="　X座標："+localStorage.sx),localStorage.getItem("sy")&&(e+="　Y座標："+localStorage.sy),h(".js-last-setting").text(e)}(),h(".c-ac:not(:first-child)").find(".js-ac-cnt").hide(),h(".c-ac:first-child").find(".js-ac-btn").addClass("is-open"),h(".js-ac-btn").on("click",function(){h(this).toggleClass("is-open").next(".js-ac-cnt").slideToggle(200)}),function(){for(let e=0;e<12;e++)h(".input-set").append('<div class="input-preview"><div class="img"><img src="'+i+'" /></div><p class="txt">'+parseInt(e+1)+"</p></div>");h('[type="file"]').on("change",function(){var t=h(this).prop("files");let a=[];switch(h(".input-preview").find("img").attr("src",i),h(".input-preview").hide(),s){case"normal":file_max=6,h(".input-preview:nth-child(-n+6)").show();break;case"combined":file_max=12,h(".input-preview").show();break;case"flying_s":file_max=7,h(".input-preview:nth-child(-n+7)").show()}n=t.length,file_max<t.length&&(n=file_max);for(let e=0;e<n;e++)a[e]=new FileReader,a[e].onloadend=function(){h(".input-preview").eq(e).find("img").attr({src:a[e].result,id:"img"+e}),e+1===n&&c()},a[e].readAsDataURL(t[e])})}(),h(".input-preview").on("dragstart",function(e){e.originalEvent.dataTransfer.setData("text/plain",e.target.id)}),h(".input-preview").on("dragover",function(e){e.preventDefault()}),h(".input-preview").on("drop",function(e){e.preventDefault();var t=e.originalEvent.dataTransfer.getData("text/plain"),e=h(this).find("img").attr("src");h(this).find("img").attr("src",document.getElementById(t).src),document.getElementById(t).src=e,c()}),h("input[name=type]").on("change",function(){switch(h(this).val()){case"normal":s="normal";break;case"combined":s="combined";break;case"flying_s":s="flying_s"}}),function(){let t=[],e=document.getElementById("generate"),a=e.getContext("2d");h(".js-btn-generate").on("click",function(){switch(sx=localStorage.sx,sy=localStorage.sy,sw=localStorage.sw,sh=localStorage.sh,s){case"normal":e.width=2*sw,e.height=3*sh;break;case"combined":e.width=4*sw,e.height=3*sh;break;case"flying_s":e.width=2*sw,e.height=4*sh}a.beginPath(),a.fillStyle="rgb(234 226 211)",a.fillRect(0,0,e.width,e.height);for(let e=0;e<n;e++){switch(dx=0,dy=0,dw=sw,dh=sh,e){case 1:case 3:case 5:dx=+dw;break;case 6:case 8:case 10:dx=2*dw;break;case 7:case 9:case 11:dx=3*dw}switch(e){case 2:case 3:case 8:case 9:dy=+dh;break;case 4:case 5:case 10:case 11:dy=2*dh}"flying_s"===s&&6===e&&(dx=0,dy=3*dh),t[e]=document.getElementById("img"+e),a.drawImage(t[e],sx,sy,sw,sh,dx,dy,dw,dh)}})}()})}(jQuery);